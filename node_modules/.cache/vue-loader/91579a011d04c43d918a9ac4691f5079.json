{"remainingRequest":"/Users/iasmina/Desktop/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iasmina/Desktop/vue/src/components/moviesList/moviesList.vue?vue&type=style&index=0&id=d5e0b922&scoped=true&lang=css&","dependencies":[{"path":"/Users/iasmina/Desktop/vue/src/components/moviesList/moviesList.vue","mtime":1562785061410},{"path":"/Users/iasmina/Desktop/vue/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/iasmina/Desktop/vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/iasmina/Desktop/vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/iasmina/Desktop/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/iasmina/Desktop/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.movie-list {\n  padding: 20px;\n  min-height: 900px;\n}\n.movie-title {\n  margin: 0;\n  font-size: 12px;\n  letter-spacing: 0.8px;\n  transition: color 0.5s ease;\n}\nimg {\n  transform: scale(0.97) translateZ(0);\n  transition: opacity 0.5s ease, transform 0.5s ease;\n}\nimg:hover {\n  transform: scale(1.03);\n  box-shadow: 0 0 10px rgba(#081c24, 0.1);\n  cursor: pointer;\n}\n.movie-title:hover {\n  cursor: pointer;\n  color: #081c24;\n}\n.not-found__content {\n  text-align: center;\n}\n",{"version":3,"sources":["moviesList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"moviesList.vue","sourceRoot":"src/components/moviesList","sourcesContent":["<template>\n  <div class=\"movie-list\">\n    <div class=\"container\">\n      <h1 class=\"title is-3\">{{ listTitle }} ({{ results }})</h1>\n        <div class=\"columns is-multiline is-mobile\">\n          <a\n            v-for=\"movie in movies\"\n            class=\"column is-half-mobile is-one-third-tablet is-one-quarter-desktop\"\n            :href=\"'/movie/' + movie.id\"\n            @click.prevent=\"openMoviePopup(movie.id, true)\"\n          >\n            <img :src=\"'http://image.tmdb.org/t/p/w185' + movie.poster_path\">\n            <p class=\"movie-title\">{{ movie.title }}</p>\n          </a>\n        </div>\n\n        <section v-if=\"!movies.length\" class=\"not-found\">\n          <div class=\"not-found__content\">\n              <h2 class=\"not-found__title\" v-if=\"mode == 'search'\">Nothing Found</h2>\n              <h2 class=\"not-found__title\" v-if=\"mode == 'favorite'\">You haven't added any favorite movies</h2>\n          </div>\n        </section>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from 'axios';\n  import storage from '../../storage.js';\n\n  export default {\n    props: ['mode', 'category'],\n    //clear search query when reloading route\n    beforeRouteLeave (to, from, next) {\n      if(from.name == 'search'){\n        eventHub.$emit('setSearchQuery', true);\n      }\n      next();\n    },\n    data(){\n      return {\n        movies: [],\n        listTitle: '',\n        results: '',\n      }\n    },\n    computed: {\n      pageTitle() {\n        return this.listTitle + storage.pageTitlePostfix;\n      },\n      query() {\n        return this.$route.params.query || '';\n      },\n      request() {\n        //check mode and make appropriate request for movie list\n        if (this.mode == 'search') {\n          return `/search/movie?api_key=${storage.apiKey}&language=en-US&query=${this.query}&page=1`;\n        } else if (this.mode == 'collection') {\n          const category = this.$route.params.category || this.category;\n          return `/movie/${category}?api_key=${storage.apiKey}&language=en-US&page=1`;\n        }\n      },\n    },\n    methods: {\n      openMoviePopup(id, event){\n        eventHub.$emit('openMoviePopup', id, event);\n      },\n      //get mode and set list to appropriate data\n      fetchCategory(){\n        axios.get(this.request)\n        .then(function(resp){\n          let data = resp.data;\n          this.movies = data.results;\n          this.results = this.movies.length;\n\n          document.title = this.pageTitle;\n        }.bind(this))\n        .catch(function(error) {\n          this.$router.push({ name: '404' });\n        }.bind(this));\n      },\n      fetchFavorites() {\n        if (localStorage.getItem('favorites')) {\n          const ids = JSON.parse(localStorage.getItem('favorites'));\n          if (ids.length > 0) {\n            this.results = ids.length;\n            let favorites = [];\n\n            //loop through favorites localStorage ids and get movies\n            ids.forEach(function(id, key) {\n              axios.get(`/movie/${id}?api_key=${storage.apiKey}&language=en-US`)\n                .then(function(resp) {\n                  favorites.push(resp.data);\n                });\n            });\n            this.movies = favorites;\n          }\n        }\n      }\n    },\n    watch: {\n      //watch if route params change and fetch correct list\n      query(value){\n        this.fetchCategory(value);\n      },\n    },\n    created () {\n      //check mode and get title for list\n      if (this.mode == 'search'){\n        this.fetchCategory();\n        this.listTitle = storage.categories['search'];\n        eventHub.$emit('setSearchQuery');\n      } else if (this.mode == 'collection') {\n        this.fetchCategory();\n        let category = this.$route.params.category || this.category;\n        this.listTitle = storage.categories[category];\n      } else if (this.mode == 'favorite') {\n        this.listTitle = storage.categories['favorite'];\n        this.fetchFavorites();\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .movie-list {\n    padding: 20px;\n    min-height: 900px;\n  }\n  .movie-title {\n    margin: 0;\n    font-size: 12px;\n    letter-spacing: 0.8px;\n    transition: color 0.5s ease;\n  }\n  img {\n    transform: scale(0.97) translateZ(0);\n    transition: opacity 0.5s ease, transform 0.5s ease;\n  }\n  img:hover {\n    transform: scale(1.03);\n    box-shadow: 0 0 10px rgba(#081c24, 0.1);\n    cursor: pointer;\n  }\n  .movie-title:hover {\n    cursor: pointer;\n    color: #081c24;\n  }\n  .not-found__content {\n    text-align: center;\n  }\n</style>"]}]}